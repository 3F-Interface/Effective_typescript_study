## Item4

구조적인 타이핑에 익숙해 진다는 것은 무엇일까?

우선 자바스크립트의 본질인 덕타이핑에 대해 이해하고 넘어가도록 해봅시다. 

> 덕타이핑이란?
>
> 객체가 어떤 타입에 부합하는 변수와 메서드를 가질 경우 객체를 해당 타입에 속하는 것으로 간주하는 방식입니다.
>
> "꽥꽥하면서 울고 날아다닌다면 그 새를 오리라 부를 것이다."

그럼 구조적인 타이핑이란 무엇일까요?

```tsx
interface Vector2D {
  x: number;
  y: number;
}

function calculateLength(v : Verctor2D) {
  return Math.sqer(v.x * v.x + v.y * v.y);
}

interface NamedVector {
  name: string;
  x: number;
  y: number;
}

const nv: NamedVector = {x:3, y:4, name: 'Zee'}
calculateLength(nv)   // 5
```

벡터의 길이를 구하는 함수의 인자는 `Vector2D`로 설정하였지만 `NamedVector`또한 호환이 되어서 타입 체크가 제대로 되지 않습니다.

이와 같이 타입스크립트는 함수가 원하는 매개변수가 그대로 주어진다면 타입이 어떠한지에 대해서는 신경쓰지 않고 동작을 그대로 모델링합니다.

여기서 비슷한 구조적 타이핑의 문제점이 발생합니다.

```tsx
interface Vector3D {
  x: number
  y: number
  z: number
}

function normalize(v : Vector3D) {
	const length = calculateLength(v);
  return {
    x: v.x / length,
    y v.y / length,
    z: v.z / length,
  }
}
```

다들 예상하겠지만 여기서의 `normalize`함수는 제대로 동작할리가 없다. 왜냐하면 `calculateLength`는 2D 벡터의 길이를 구하는 공식이기 때문이다 왜 여기서 타입체크를 하지 못했을까? 당연히 Vector3D가 x, y라는 프로퍼티를 포함하고 있기 때문입니다. 함수를 작성할때 호출에 사용되는 매개변수의 속성들이 매개변수에 선언된 속성만을 가질거라 생각하기 쉽습니다. 하지만 타입스크립트 타입 시스템은 좋던 싫던 타입에 열려 있습니다. 그렇기 때문에 이와 같이 예상된 에러를 일으키는 타입체크를 놓치게 되는 것입니다.

구조적 타이핑을 이용한다는 것은 위에서 한 것 처럼 명목적 타이핑을 목적으로 하는 코드에서는 이해할 수 없는 결과를 불러일으킬 수 있습니다. 

하지만 구조적 타이핑이라는 것이 본질적으로 더 열려있는 타입 시스템을 이용하는 것이며 코드의 생산성과 재활용성을 높힐 수 있는 방법입니다. 그래서 결국에는 구조적 타이핑을 잘 이용하는 것이 타입 시스템을 구축하는 것에 매우 중요한 요소가 될 것이다.